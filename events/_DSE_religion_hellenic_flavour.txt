namespace = dse_hellenic_conversion
namespace = dse_hellenic_flavour
namespace = dse_invictus_religion_mechanic
namespace = dse_hellenic_olympic_games

country_event = {
	id = dse_hellenic_conversion.1
	title = dse_hellenic_conversion.1.t
	desc = dse_hellenic_conversion.1.d
	picture = THEATRE_eventPicture
    is_triggered_only = yes
	
	option = {
		name = dse_hellenic_conversion.1.o1 # Normal Hellenism
        country_event = { id = dse_hellenic_conversion.2 }
	}

	option = {
        trigger = { NOT = { any_country = { religion = solar_monism } } }
		name = dse_hellenic_conversion.1.o2 # Sol Invictus
        country_event = { id = dse_hellenic_conversion.3 }
	
	}
	
	option = {
		name = dse_hellenic_conversion.1.exit # Back
	}

}

# Normal Hellenism
country_event = {
	id = dse_hellenic_conversion.2
	title = dse_hellenic_conversion.2.t
	desc = dse_hellenic_conversion.2.d
	picture = MOUNT_OLYMPUS_eventPicture
    major = yes
    is_triggered_only = yes
	
	option = {
		name = dse_hellenic_conversion.2.o1 # Accept Conversion
        change_religion = hellenic_pagan
        capital_scope = { change_religion = hellenic_pagan }

        add_country_modifier = {
            name = "hellenic_conversion_zeal"
            duration = 3650
        }
		hidden_effect = {
			every_known_country = {
				limit = {
					culture_group = byzantine
				}
				country_event = { id = dse_hellenic_conversion.4 days = 30 }
			}

			custom_tooltip = normal_hellenism_mechanic_tooltip		
		}
	}

	#option = {
	#	name = dse_hellenic_conversion.2.exit # Back
    #    country_event = { id = dse_hellenic_conversion.1 }
	#}

}

# Sol Invictus
country_event = {
	id = dse_hellenic_conversion.3
	title = dse_hellenic_conversion.3.t
	desc = dse_hellenic_conversion.3.d
	picture = PRAISE_SUN_eventPicture
    major = yes
    is_triggered_only = yes
	
	option = {
		name = dse_hellenic_conversion.3.o1 # Accept Conversion
        change_religion = solar_monism
		custom_tooltip = invictus_hellenic_to_sol_conversion
		hidden_effect = {
			every_owned_province = {
				limit = {
					religion = hellenic_pagan
				}
				change_religion = solar_monism
			}
		}

        add_country_modifier = {
            name = "hellenic_conversion_zeal"
            duration = 3650
        }	

        custom_tooltip = sol_invictus_mechanic_tooltip
	}

	#option = {
	#	name = dse_hellenic_conversion.3.exit # Back
    #    country_event = { id = dse_hellenic_conversion.1 }
	#}

}

country_event = { # Event for byzantine culture when someone has revived Hellenism
	id = dse_hellenic_conversion.4
	title = dse_hellenic_conversion.4.t
	desc = dse_hellenic_conversion.4.d
	picture = MOUNT_OLYMPUS_eventPicture
    is_triggered_only = yes
	
	option = {
		ai_will_do = {
			factor = 60 
		}
		name = dse_hellenic_conversion.4.o1 # I didn't like CURRENT_RELIGION eitherway
        change_religion = hellenic_pagan
        capital_scope = { change_religion = hellenic_pagan }

        add_country_modifier = {
            name = "hellenic_conversion_zeal"
            duration = 3650
        }

        custom_tooltip = normal_hellenism_mechanic_tooltip
	}

	option = {
		ai_will_do = {
			factor = 40 
		}
		name = dse_hellenic_conversion.4.o2 # We shall pass. It died off for a reason.
		add_prestige = 1
	}

}


# Infantry Tactics
country_event = {
	id = dse_invictus_religion_mechanic.1
	title = dse_invictus_religion_mechanic.1.t
	desc = dse_invictus_religion_mechanic.1.d
	picture = PRAISE_SUN_eventPicture
    major = yes
    is_triggered_only = yes
	
	option = {
		name = dse_invictus_religion_mechanic.1.o1
        add_country_modifier = {
            name = solar_infantry_mod_1
            duration = 92
        }
	}
	option = {
		name = dse_invictus_religion_mechanic.1.o2
        add_country_modifier = {
            name = solar_infantry_mod_2
            duration = 365
        }

	}

	option = {
		name = dse_invictus_religion_mechanic.999.exit # Back
        add_church_power = 125
	}

}

# Cavalry Tactics
country_event = {
	id = dse_invictus_religion_mechanic.2
	title = dse_invictus_religion_mechanic.2.t
	desc = dse_invictus_religion_mechanic.2.d
	picture = PRAISE_SUN_eventPicture
    major = yes
    is_triggered_only = yes
	
	option = {
		name = dse_invictus_religion_mechanic.2.o1
        add_country_modifier = {
            name = solar_cavalry_mod_1
            duration = 185
        }
	}
	option = {
		name = dse_invictus_religion_mechanic.2.o2
        add_country_modifier = {
            name = solar_cavalry_mod_2
            duration = 365
        }
	}

	option = {
		name = dse_invictus_religion_mechanic.999.exit # Back
        add_church_power = 75
	}

}

# Artillery Tactics
country_event = {
	id = dse_invictus_religion_mechanic.3
	title = dse_invictus_religion_mechanic.3.t
	desc = dse_invictus_religion_mechanic.3.d
	picture = PRAISE_SUN_eventPicture
    major = yes
    is_triggered_only = yes
	
	option = {
		name = dse_invictus_religion_mechanic.3.o1
        add_country_modifier = {
            name = solar_artillery_mod_1
            duration = 185
        }
	}
	option = {
		name = dse_invictus_religion_mechanic.3.o2
        add_country_modifier = {
            name = solar_artillery_mod_2
            duration = 185
        }
	}

	option = {
		name = dse_invictus_religion_mechanic.999.exit # Back
        add_church_power = 75
	}

}

# Defense Tactics
country_event = {
	id = dse_invictus_religion_mechanic.4
	title = dse_invictus_religion_mechanic.4.t
	desc = dse_invictus_religion_mechanic.4.d
	picture = PRAISE_SUN_eventPicture
    major = yes
    is_triggered_only = yes
	
	option = {
		name = dse_invictus_religion_mechanic.3.o1
        add_country_modifier = {
            name = solar_defense_mod_1
            duration = 365
        }
	}
	option = {
		name = dse_invictus_religion_mechanic.3.o2
        add_country_modifier = {
            name = solar_defense_mod_2
            duration = 365
        }
	}

	option = {
		name = dse_invictus_religion_mechanic.999.exit # Back
        add_church_power = 50
	}

}

# Naval Tactics # Ignored for now
country_event = {
	id = dse_invictus_religion_mechanic.5
	title = dse_invictus_religion_mechanic.5.t
	desc = dse_invictus_religion_mechanic.5.d
	picture = PRAISE_SUN_eventPicture
    major = yes
    is_triggered_only = yes
	
	option = {
		name = dse_invictus_religion_mechanic.5.o1

	}

	option = {
		name = dse_invictus_religion_mechanic.5.exit # Back
        add_church_power = 25
	}

}

# Yoinked from Anbennar Harpies
country_event = {
	id = dse_invictus_religion_mechanic.6
	title = dse_invictus_religion_mechanic.6.t
	desc = dse_invictus_religion_mechanic.6.d
	picture = PRAISE_SUN_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			harpy_define_raid_target = yes
		}
	}
	
	after = {
		hidden_effect = {
			event_target:sol_raid1 = {
				clr_province_flag = sol_raid_@ROOT
			}
			event_target:sol_raid2 = {
				clr_province_flag = sol_raid_@ROOT
			}
			event_target:sol_raid3 = {
				clr_province_flag = sol_raid_@ROOT
			}
			event_target:sol_raid4 = {
				clr_province_flag = sol_raid_@ROOT
			}
			clr_country_flag = sol_invictus_raid_menu
		}
	}
	
	option = {
		name = dse_invictus_religion_mechanic.6.o1
        ai_chance = { factor = 1 }
		trigger = { event_target:sol_raid2 = { development = 3 } }
		goto = sol_raid1
		event_target:sol_raid1 = {
			sol_raid_effect = yes
		}
	}
	option = {
		name = dse_invictus_religion_mechanic.6.o2
        ai_chance = { factor = 1 }
		trigger = { event_target:sol_raid2 = { development = 3 } }
		goto = sol_raid2
		event_target:sol_raid2 = {
			sol_raid_effect = yes
		}
	}
	option = {
		name = dse_invictus_religion_mechanic.6.o3
        ai_chance = { factor = 1 }
		trigger = { event_target:sol_raid3 = { development = 3 } }
		goto = sol_raid3
		event_target:sol_raid3 = {
			sol_raid_effect = yes
		}
	}
	option = {
		name = dse_invictus_religion_mechanic.6.o4
        ai_chance = { factor = 1 }
		trigger = { event_target:sol_raid4 = { development = 3 } }
		goto = sol_raid4
		event_target:sol_raid4 = {
			sol_raid_effect = yes
		}
	}
	option = {
        name = dse_invictus_religion_mechanic.999.exit
        ai_chance = { factor = 0 }
		add_church_power = 50
	}
}


country_event = { #Panhellenic Games - Disabled

	id = dse_hellenic_olympic_games.1
	title = dse_hellenic_olympic_games.1.t
	desc = dse_hellenic_olympic_games.1.d
	picture = hellenic_olympics

	trigger = {
		always = no
		religion = hellenic_pagan
		is_month = 6
		NOT = { is_month = 9 }
		NOT = { has_country_modifier = olympic_games }
		NOT = { has_country_flag = olympic_games_skipped }
		OR = { 
			NOT = { any_known_country = { religion = hellenic_pagan num_of_cities = ROOT } } #Only the biggest Hellenic country gets the games
			AND = { 
				primary_culture = greek
				is_subject = no
			}
		}
		any_owned_province = {
			controlled_by = owner
			is_city = yes
			NOT = { has_siege = yes }
			NOT = { has_province_modifier = religious_scandal_province }
			OR = {
				is_in_capital_area = yes
				is_overseas = no
			}
			OR = {
				has_owner_culture = yes
				has_owner_religion = yes
				has_building = temple
				is_capital = yes
			}
		}
	}
		
	mean_time_to_happen = { months = 1 }

	immediate = { 
		hidden_effect = {
			#Choose a suitable location
			every_owned_province = {
				limit = { 
					OR = {
						is_in_capital_area = yes 
						is_overseas = no #State
					}
				}
				if = {
					limit = { has_owner_religion = yes }
					change_variable = { which = olympic_games value = 2 }
				}
				if = {
					limit = { has_owner_culture = yes }
					change_variable = { which = olympic_games value = 2 }
				}
				if = {
					limit = { has_port = yes }
					change_variable = { which = olympic_games value = 1 }
				}
				if = {
					limit = { has_building = temple }
					change_variable = { which = olympic_games value = 1 }
				}
				if = {
					limit = { unrest = 1 }
					change_variable = { which = olympic_games value = -1 }
				}
				if = {
					limit = { unrest = 3 }
					change_variable = { which = olympic_games value = -1 }
				}
				if = {
					limit = { unrest = 5 }
					change_variable = { which = olympic_games value = -1 }
				}
				if = { 
					limit = { 
						OR = { 
							is_colony = yes
							NOT = { controlled_by = owner }
							has_siege = yes
							has_province_modifier = religious_scandal_province
						}
					}
					set_variable = { which = olympic_games value = 0 }
				}
			}
			random_owned_province = { 
				limit = { 
					owner = { NOT = { has_country_flag = olympic_games_site_chosen } }
					check_variable = { which = olympic_games value = 8 }
				}
				set_province_flag = olympic_games_site
				owner = { set_country_flag = olympic_games_site_chosen }
			}
			random_owned_province = { 
				limit = { 
					owner = { NOT = { has_country_flag = olympic_games_site_chosen } }
					check_variable = { which = olympic_games value = 7 }
				}
				set_province_flag = olympic_games_site
				owner = { set_country_flag = olympic_games_site_chosen }
			}
			random_owned_province = { 
				limit = { 
					owner = { NOT = { has_country_flag = olympic_games_site_chosen } }
					check_variable = { which = olympic_games value = 6 }
				}
				set_province_flag = olympic_games_site
				owner = { set_country_flag = olympic_games_site_chosen }
			}
			random_owned_province = { 
				limit = { 
					owner = { NOT = { has_country_flag = olympic_games_site_chosen } }
					check_variable = { which = olympic_games value = 5 }
				}
				set_province_flag = olympic_games_site
				owner = { set_country_flag = olympic_games_site_chosen }
			}
			random_owned_province = { 
				limit = { 
					owner = { NOT = { has_country_flag = olympic_games_site_chosen } }
					check_variable = { which = olympic_games value = 4 }
				}
				set_province_flag = olympic_games_site
				owner = { set_country_flag = olympic_games_site_chosen }
			}
			random_owned_province = { 
				limit = { 
					owner = { NOT = { has_country_flag = olympic_games_site_chosen } }
					check_variable = { which = olympic_games value = 3 }
				}
				set_province_flag = olympic_games_site
				owner = { set_country_flag = olympic_games_site_chosen }
			}
			random_owned_province = { 
				limit = { 
					owner = { NOT = { has_country_flag = olympic_games_site_chosen } }
					check_variable = { which = olympic_games value = 2 }
				}
				set_province_flag = olympic_games_site
				owner = { set_country_flag = olympic_games_site_chosen }
			}
			random_owned_province = { 
				limit = { 
					owner = { NOT = { has_country_flag = olympic_games_site_chosen } }
					check_variable = { which = olympic_games value = 1 }
				}
				set_province_flag = olympic_games_site
				owner = { set_country_flag = olympic_games_site_chosen }
			}
			random_owned_province = { 
				limit = { owner = { NOT = { has_country_flag = olympic_games_site_chosen } } }
				set_province_flag = olympic_games_site
				owner = { clr_country_flag = olympic_games_site_chosen }
			}
			every_owned_province = { set_variable = { which = olympic_games value = 0 } }
		}
	}

	option = { 
		name = dse_hellenic_olympic_games.1.o1 #Let the games begin
		ai_chance = { factor = 70 }
		if = { 
			limit = { NOT = { monthly_income = 5 } }
			add_treasury = -10
		}
		if = { 
			limit = { 
				monthly_income = 5
				NOT = { monthly_income = 250 } 
				}
			add_years_of_income = -0.16
		}
		if = { 
			limit = { monthly_income = 250 }
			add_treasury = -500
		}
		add_prestige = 5
		add_country_modifier = { name = olympic_games duration = 100 }
		set_country_flag = olympic_games
		random_owned_province = { 
			limit = { has_province_flag = olympic_games_site }
			add_province_modifier = { name = olympic_games_site duration = 30 } #Actually just five days
		}
		every_known_country = { 
			limit = {
				OR = { 
					religion = hellenic_pagan
					is_subject_of = ROOT
				}
			}
			country_event = { id = dse_hellenic_olympic_games.5 days = 0 }
		}
	}
	option = { 
		name = dse_hellenic_olympic_games.1.o2 #$MONARCH$ shall participate personally
		ai_chance = { factor = 10 }
		trigger = {
			has_regency = no
			is_female = no
		}
		if = { 
			limit = { NOT = { monthly_income = 5 } }
			add_treasury = -20
		}
		if = { 
			limit = { 
				monthly_income = 5
				NOT = { monthly_income = 250 } 
			}
			add_years_of_income = -0.32
		}
		if = { 
			limit = { monthly_income = 250 }
			add_treasury = -1000
		}
		add_prestige = 5
		set_country_flag = olympic_games
		set_country_flag = emperor_participating
		add_country_modifier = { name = olympic_games duration = 100 }
		
		random_owned_province = { 
			limit = { has_province_flag = olympic_games_site }
			add_province_modifier = { name = olympic_games_site duration = 30 } #Actually five days!
		}
		
		every_known_country = { 
			limit = {
				OR = { 
					religion = hellenic_pagan
					is_subject_of = ROOT
				}
			}
			country_event = { id = dse_hellenic_olympic_games.5 days = 0 }
		}
	}

	option = { 
		name = dse_hellenic_olympic_games.1.o3 #Skip them
		ai_chance = { 
			factor = 30
		}
		add_prestige = -10
		hidden_effect = { 
			set_country_flag = olympic_games_skipped
			every_owned_province = { clr_province_flag = olympic_games_site }
		}
	}
}

country_event = { #Olympic victory

	id = dse_hellenic_olympic_games.2
	title = dse_hellenic_olympic_games.2.t
	desc = dse_hellenic_olympic_games.2.d
	picture = hellenic_chariots

	trigger = { 
		has_country_flag = olympic_games
		any_owned_province = { 
			has_province_flag = olympic_games_site 
			NOT = { has_province_modifier = olympic_games_site }
			}
		}

	mean_time_to_happen = { months = 2 }

	immediate = { 
		clr_country_flag = olympic_games
		clr_country_flag = olympic_program
		}

	option = { 
		name = dse_hellenic_olympic_games.2.o1 #Reward the winners
		ai_chance = {
			factor = 50 
		}
		if = { 
			limit = { has_country_flag = emperor_participating }
			add_prestige = 10 
		}
		add_legitimacy_equivalent = {
			amount = 10
			republican_tradition = 5
		}
		hidden_effect = {
			clr_country_flag = emperor_participating
			every_owned_province = { clr_province_flag = olympic_games_site }
		}
	}
	option = { 
		name = dse_hellenic_olympic_games.2.o2 #Celebrate the games
		ai_chance = { factor = 50 }
		if = { 
			limit = { NOT = { has_country_flag = emperor_participating } }
			add_prestige = 5
		}
		if = { 
			limit = { has_country_flag = emperor_participating }
			add_prestige = 10
		}
		hidden_effect = {
			clr_country_flag = emperor_participating
			every_owned_province = { clr_province_flag = olympic_games_site }
		}
	}
}

country_event = { #Olympic defeat

	id = dse_hellenic_olympic_games.3
	title = dse_hellenic_olympic_games.3.t
	desc = dse_hellenic_olympic_games.3.d
	picture = hellenic_olympics

	trigger = {
		has_country_flag = olympic_games
		any_owned_province = { 
			has_province_flag = olympic_games_site 
			NOT = { has_province_modifier = olympic_games_site }
		}
	}

	mean_time_to_happen = { 
		months = 3 
		modifier = { 
			has_country_flag = emperor_participating
			factor = 2
		}
		modifier = {
			has_country_flag = olympic_program
			factor = 1.4
		}
	}

	immediate = {
		clr_country_flag = olympic_games
		clr_country_flag = olympic_program
	}
		
	option = { 
		name = dse_hellenic_olympic_games.3.o1 #Accept the results
		ai_chance = { 
			factor = 25 
			modifier = { 
				NOT = { prestige = 0.25 }
				factor = 0.7
			}
			modifier = { 
				NOT = { prestige = 0 }
				factor = 0.7
			}
			modifier = { 
				NOT = { prestige = -0.25 }
				factor = 0.7
			}
			modifier = { 
				NOT = { prestige = -0.50 }
				factor = 0.7
			}
		}
		if = { 
			limit = { NOT = { has_country_flag = emperor_participating } }
			add_prestige = -3
		}
		if = { 
			limit = { has_country_flag = emperor_participating }
			add_prestige = -10
		}
		hidden_effect = {
			clr_country_flag = emperor_participating
			every_owned_province = { clr_province_flag = olympic_games_site }
		}
	}
	option = { 
		name = dse_hellenic_olympic_games.3.o2 #Encourage our athletes to do better in the future
		ai_chance = { 
			factor = 25 
		}

		trigger = { NOT = { has_country_flag = emperor_participating } }

		set_country_flag = olympic_program
		hidden_effect = {
			clr_country_flag = emperor_participating
			every_owned_province = { clr_province_flag = olympic_games_site }
		}
	}
	option = {
		name = dse_hellenic_olympic_games.3.o3 #Punish the winners for embarassing us
		trigger = { has_country_flag = emperor_participating }
		ai_chance = { 
			factor = 30
		}
		add_legitimacy_equivalent = {
			amount = 10
			republican_tradition = 5
		}
		hidden_effect = {
			clr_country_flag = emperor_participating
			every_owned_province = { clr_province_flag = olympic_games_site }
		}
	}
		
}

country_event = { #Olympic scandal

	id = dse_hellenic_olympic_games.4
	title = dse_hellenic_olympic_games.4.t
	desc = dse_hellenic_olympic_games.4.d
	picture = hellenic_olympics

	trigger = {
		has_country_flag = olympic_games
		any_owned_province = { 
			has_province_flag = olympic_games_site 
			NOT = { has_province_modifier = olympic_games_site }
		}
	}

	mean_time_to_happen = { 
		months = 4 
	}

	immediate = { 
		clr_country_flag = olympic_games
		clr_country_flag = olympic_program
	}

	option = { 
		name = dse_hellenic_olympic_games.4.o1 #Make the offenders pay a fine
		ai_chance = { factor = 50 }
		add_prestige = -10
		if = { 
			limit = { has_country_flag = emperor_participating }
			add_years_of_income = -0.08
		}
		hidden_effect = {
			clr_country_flag = emperor_participating
			every_owned_province = { clr_province_flag = olympic_games_site }
		}
	}
	option = {
		name = dse_hellenic_olympic_games.4.o2 #Sweep it under the rug
		add_dip_power = -50
		add_prestige = -10

		hidden_effect = {
			clr_country_flag = emperor_participating
			every_owned_province = { clr_province_flag = olympic_games_site }
		}
	}
	option = {
		name = dse_hellenic_olympic_games.4.o3 #Execute the offenders
		ai_chance = { factor = 20 }
		trigger = {
			NOT = { has_country_flag = emperor_participating }
		}
		add_stability = -1
		hidden_effect = {
			clr_country_flag = emperor_participating
			every_owned_province = { clr_province_flag = olympic_games_site }
		}
	}
}

country_event = { #Panhellenic Games - Non-Hosting - Participating

	id = dse_hellenic_olympic_games.5
	title = dse_hellenic_olympic_games.5.t
	desc = dse_hellenic_olympic_games.5.d
	picture = hellenic_olympics

	is_triggered_only = yes

	option = { 
		name = dse_hellenic_olympic_games.5.o1 #Send our finest athletes
		ai_chance = { factor = 50 }
		if = { 
			limit = { NOT = { monthly_income = 10 } }
			add_treasury = -5
			}
		if = { 
			limit = { 
				monthly_income = 10
				NOT = { monthly_income = 250 } 
				}
			add_years_of_income = -0.04
			}
		if = { 
			limit = { monthly_income = 250 }
			add_treasury = -125
			}
		set_country_flag = olympic_games
	}
	option = { 
		name = dse_hellenic_olympic_games.5.o2 #Boycott the games
		ai_chance = {
			factor = 50 
			modifier = { 
				NOT = { religion = hellenic_pagan }
				factor = 2
			}

			modifier = {
				NOT = { 
					OR = { 
						FROM = { war_with = ROOT }
						FROM = { truce_with = ROOT }
						FROM = { is_enemy = ROOT }
						FROM = { is_rival = ROOT }
						}
					}
				factor = 0
			}
		}

		FROM = { add_prestige = -1 }
	}
}

